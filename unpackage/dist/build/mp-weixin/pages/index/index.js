"use strict";var o=require("../../common/vendor.js");const a={data:()=>({dark_open:!1,font_color:"#111111",view_color:"#d0e7ff",bar_back_color:"#78bdff",swi_color:"rgb(234, 234, 234)",city_name:"杭州",city_location1:"",city_location2:"",life_list:[],wea_info:[],air_level_word:"",aqi_word:"",air_level:"",each_day_week:[],each_day_time:[],each_day_wea:[],day_icon:[],chartData:{categories:["","","","","","",""],series:[{name:"最高气温",data:[]},{name:"最低气温",data:[]}]},icon:[],frist_change:!0,sencend_change:!1,cityid:"101210101",color:"black",opacity:100,value:0,range1:[],range2:[],city:"",temp_now:"",temp_max:"",temp_min:"",weather_0:"",air_0:"",scrollTop:0,each_hour:{hour:[],wea:[],tem:[]},old:{scrollTop:0},iStatusBarHeight:0}),methods:{change(a){!0===a.target.value?(o.index.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#fff"}),o.index.setBackgroundColor({backgroundColor:"rgb(40, 44, 53)",backgroundColorTop:"rgb(40, 44, 53)",backgroundColorBottom:"rgb(40, 44, 53)"}),this.bar_back_color="#282c35",console.log(this.bar_back_color),this.view_color="#3d454f",this.font_color="#eeeeee",this.dark_open=!0):(o.index.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#fff"}),o.index.setBackgroundColor({backgroundColor:"rgb(120, 189, 255)",backgroundColorTop:"rgb(120, 189, 255)",backgroundColorBottom:"rgb(120, 189, 255)"}),this.bar_back_color="#78bdff",this.view_color="#d0e7ff",this.font_color="#111111",this.dark_open=!1)},gettodaywea(a){o.index.request({url:"https://api.seniverse.com/v3/weather/hourly.json",data:{key:"S8bEb7PvT6EdaikXS",location:this.cityid},success:o=>{console.log(o),this.city_name=o.data.results[0].location.name,this.temp_now=o.data.results[0].hourly[0].temperature,this.temp_max=this.chartData.series[0].data[0],this.temp_min=this.chartData.series[1].data[0],console.log(o.data.results[0].hourly[0]);for(var a=0;a<10;a++)this.each_hour.hour[a]=o.data.results[0].hourly[a].time.substring(11,16),console.log(this.each_hour.hour[a]);for(a=0;a<10;a++)this.each_hour.tem[a]=o.data.results[0].hourly[a].temperature;for(a=0;a<10;a++)this.each_hour.wea[a]=o.data.results[0].hourly[a].text;for(var t in this.icon=[],this.each_hour.wea)"多云"===this.each_hour.wea[t]||"阴转多云"===this.each_hour.wea[t]||"多云转阴"===this.each_hour.wea[t]?this.icon.push("i-duoyun"):"小雨"===this.each_hour.wea[t]?this.icon.push("i-xiaoyu"):"晴"===this.each_hour.wea[t]?Number(this.each_hour.hour[t].split(":")[0])>6&&Number(this.each_hour.hour[t].split(":")[0])<18?this.icon.push("i-qing"):this.icon.push("i-yueliang"):"雷阵雨"===this.each_hour.wea[t]?this.icon.push("i-leiyujiaojia"):"小雨转晴"===this.each_hour.wea[t]?this.icon.push("i-xiaoyu"):"中雨"===this.each_hour.wea[t]?this.icon.push("i-zhongyu"):"中雪"===this.each_hour.wea[t]?this.icon.push("i-zhongxue"):"小雪"===this.each_hour.wea[t]&&this.icon.push("i-xiaoxue")},fail:o=>{console.log(o)}})},getalldaywea(a){this.each_day_wea=[],o.index.request({url:"https://yiketianqi.com/api?unescape=1",data:{appid:"29688265",appsecret:"7LIT0JEW",unescape:"1",version:"v1",cityid:this.cityid},success:o=>{for(var a=0;a<o.data.data.length;a++)this.each_day_time.push(o.data.data[a].date.split("-")[1]+"/"+o.data.data[a].date.split("-")[2]);for(a=0;a<o.data.data.length;a++)this.each_day_week.push(o.data.data[a].week);for(a=0;a<o.data.data.length;a++)this.each_day_wea.push(o.data.data[a].wea_day);for(var t in this.day_icon=[],this.chartData.series[0].data=[],this.chartData.series[1].data=[],this.each_day_wea)-1!==this.each_day_wea[t].search("晴")?this.day_icon.push("i-qing"):-1!==this.each_day_wea[t].search("多云")||-1!==this.each_day_wea[t].search("阴")?this.day_icon.push("i-duoyun"):-1!==this.each_day_wea[t].search("小雨")?this.day_icon.push("i-xiaoyu"):-1!==this.each_day_wea[t].search("中雨")?this.day_icon.push("i-zhongyu"):-1!==this.each_day_wea[t].search("大雨")?this.day_icon.push("i-dayu"):-1!==this.each_day_wea[t].search("雷阵雨")?this.day_icon.push("i-leiyujiaojia"):-1!==this.each_day_wea[t].search("小雪")?this.day_icon.push("i-xiaoxue"):-1!==this.each_day_wea[t].search("中雪")?this.day_icon.push("i-zhongxue"):-1!==this.each_day_wea[t].search("雷阵雨")&&this.day_icon.push("i-leiyujiaojia");for(a=0;a<o.data.data.length;a++)this.chartData.series[0].data.push(o.data.data[a].tem1.replace("℃","")),this.chartData.series[1].data.push(o.data.data[a].tem2.replace("℃",""));console.log(this.chartData.series[0].data),console.log(this.chartData.series[1].data)}})},getairinfo(a){o.index.request({url:"https://devapi.qweather.com/v7/air/now",data:{location:a,key:"71cb1295daf64c3293a9e20a1372b31f"},success:o=>{this.air_level=o.data.now.category,this.air_level_word="当前AQI指数为"+o.data.now.aqi},fail:o=>{console.log(o)}})},getweainfo(a){o.index.request({url:"https://devapi.qweather.com/v7/weather/now",data:{location:a,key:"71cb1295daf64c3293a9e20a1372b31f"},success:o=>{this.wea_info.push(o.data.now.temp),this.wea_info.push(o.data.now.humidity),this.wea_info.push(o.data.now.windScale),this.wea_info.push(o.data.now.windDir)},fail:o=>{console.log(o)}})},getCityId(a){o.index.request({url:"https://geoapi.qweather.com/v2/city/lookup",data:{location:a,key:"71cb1295daf64c3293a9e20a1372b31f"},success:o=>{this.cityid=o.data.location[0].id}})},lifeInfo(a){var t=[];return o.index.request({url:"https://devapi.qweather.com/v7/indices/1d",data:{key:"71cb1295daf64c3293a9e20a1372b31f",location:a,type:0},success:o=>{t.push(o.data.daily[2].category),t.push(o.data.daily[0].category),t.push(o.data.daily[8].category),t.push(o.data.daily[3].category),t.push(o.data.daily[1].category),t.push(o.data.daily[15].category),t.push(o.data.daily[5].category),this.aqi_word=o.data.daily[9].text},fail:o=>{console.log(o)}}),t},proChange(a){console.log("选择省份"),!0===this.frist_change&&this.frist_change;o.pn.database().collection("cityid").get().then((o=>{for(var t in this.range2=[],o.result.data[0][a])this.range2.push({value:Object.values(o.result.data[0][a][t])[0],text:Object.keys(o.result.data[0][a][t])[0]})})).catch((o=>{console.log(o)})),console.log("e:",a)},cityChange(o){console.log("选择城市"),console.log("e:",o),""!==o&&(this.cityid=o,console.log(o),this.gettodaywea(this.cityid),this.getalldaywea(this.cityid),this.getairinfo(this.cityid),this.getweainfo(this.cityid),this.life_list=this.lifeInfo(this.cityid))}},onPageScroll:function(o){this.opacity=100-.6*o.scrollTop},onReady(){o.index.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#fff"})},onLoad(){this.getCityId(this.city_name),console.log("city_id:"+this.cityid);o.pn.database().collection("city_id").get().then((o=>{for(var a=0;a<o.result.data.length;a++)this.range1.push({value:o.result.data[a].cityname,text:o.result.data[a].cityname})})).catch((o=>{console.log(o)})),this.getalldaywea(this.cityid),this.gettodaywea(this.cityid),this.getairinfo(this.cityid),this.getweainfo(this.cityid),this.life_list=this.lifeInfo(this.cityid),this.iStatusBarHeight=o.index.getSystemInfoSync().statusBarHeight}};if(!Array){(o.resolveComponent("uni-nav-bar")+o.resolveComponent("uni-data-select")+o.resolveComponent("uni-icons")+o.resolveComponent("qiun-data-charts"))()}Math||((()=>"../../uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar.js")+(()=>"../../uni_modules/uni-data-select/components/uni-data-select/uni-data-select.js")+(()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../uni_modules/qiun-data-charts/components/qiun-data-charts/qiun-data-charts.js"))();var t=o._export_sfc(a,[["render",function(a,t,e,i,c,r){return{a:c.iStatusBarHeight+"px",b:o.p({title:"了明天气",backgroundColor:c.view_color,dark:c.dark_open}),c:c.font_color,d:o.o(r.proChange),e:o.p({localdata:c.range1,emptyText:"省",placeholder:"选择省份"}),f:o.o(r.cityChange),g:o.p({localdata:c.range2,emptyText:"市",placeholder:"选择区\\市"}),h:o.o(((...o)=>r.change&&r.change(...o))),i:c.view_color,j:o.t(c.city_name),k:c.font_color,l:c.iStatusBarHeight+"px",m:o.t(c.temp_now),n:c.font_color,o:o.t(c.temp_min),p:o.t(c.temp_max),q:c.font_color,r:o.t(c.weather_0),s:o.t(c.air_0),t:c.font_color,v:c.opacity+"%",w:o.t(c.each_hour.hour[0]),x:c.font_color,y:o.p({"custom-prefix":"icon",type:c.icon[0],size:"30"}),z:o.t(c.each_hour.tem[0]),A:c.font_color,B:o.t(c.each_hour.hour[1]),C:c.font_color,D:o.p({"custom-prefix":"icon",type:c.icon[1],size:"30"}),E:o.t(c.each_hour.tem[1]),F:c.font_color,G:o.t(c.each_hour.hour[2]),H:c.font_color,I:o.p({"custom-prefix":"icon",type:c.icon[2],size:"30"}),J:o.t(c.each_hour.tem[2]),K:c.font_color,L:o.t(c.each_hour.hour[3]),M:c.font_color,N:o.p({"custom-prefix":"icon",type:c.icon[3],size:"30"}),O:o.t(c.each_hour.tem[3]),P:c.font_color,Q:o.t(c.each_hour.hour[4]),R:c.font_color,S:o.p({"custom-prefix":"icon",type:c.icon[4],size:"30"}),T:o.t(c.each_hour.tem[4]),U:c.font_color,V:o.t(c.each_hour.hour[5]),W:c.font_color,X:o.p({"custom-prefix":"icon",type:c.icon[5],size:"30"}),Y:o.t(c.each_hour.tem[5]),Z:c.font_color,aa:o.t(c.each_hour.hour[6]),ab:c.font_color,ac:o.p({"custom-prefix":"icon",type:c.icon[6],size:"30"}),ad:o.t(c.each_hour.tem[6]),ae:c.font_color,af:o.t(c.each_hour.hour[7]),ag:c.font_color,ah:o.p({"custom-prefix":"icon",type:c.icon[7],size:"30"}),ai:o.t(c.each_hour.tem[7]),aj:c.font_color,ak:o.t(c.each_hour.hour[8]),al:c.font_color,am:o.p({"custom-prefix":"icon",type:c.icon[8],size:"30"}),an:o.t(c.each_hour.tem[8]),ao:c.font_color,ap:o.t(c.each_hour.hour[9]),aq:c.font_color,ar:o.p({"custom-prefix":"icon",type:c.icon[9],size:"30"}),as:o.t(c.each_hour.tem[9]),at:c.font_color,av:c.view_color,aw:c.font_color,ax:o.t(c.each_day_time[0]),ay:c.font_color,az:o.p({"custom-prefix":"icon",type:c.day_icon[0],size:"30"}),aA:o.t(c.each_day_wea[0]),aB:c.font_color,aC:o.t(c.each_day_week[1]),aD:c.font_color,aE:o.t(c.each_day_time[1]),aF:c.font_color,aG:o.p({"custom-prefix":"icon",type:c.day_icon[1],size:"30"}),aH:o.t(c.each_day_wea[1]),aI:c.font_color,aJ:o.t(c.each_day_week[2]),aK:c.font_color,aL:o.t(c.each_day_time[2]),aM:c.font_color,aN:o.p({"custom-prefix":"icon",type:c.day_icon[2],size:"30"}),aO:o.t(c.each_day_wea[2]),aP:c.font_color,aQ:o.t(c.each_day_week[3]),aR:c.font_color,aS:o.t(c.each_day_time[3]),aT:c.font_color,aU:o.p({"custom-prefix":"icon",type:c.day_icon[3],size:"30"}),aV:o.t(c.each_day_wea[3]),aW:c.font_color,aX:o.t(c.each_day_week[4]),aY:c.font_color,aZ:o.t(c.each_day_time[4]),ba:c.font_color,bb:o.p({"custom-prefix":"icon",type:c.day_icon[4],size:"30"}),bc:o.t(c.each_day_wea[4]),bd:c.font_color,be:o.t(c.each_day_week[5]),bf:c.font_color,bg:o.t(c.each_day_time[5]),bh:c.font_color,bi:o.p({"custom-prefix":"icon",type:c.day_icon[5],size:"30"}),bj:o.t(c.each_day_wea[5]),bk:c.font_color,bl:o.t(c.each_day_week[6]),bm:c.font_color,bn:o.t(c.each_day_time[6]),bo:c.font_color,bp:o.p({"custom-prefix":"icon",type:c.day_icon[6],size:"30"}),bq:o.t(c.each_day_wea[6]),br:c.font_color,bs:o.p({type:"line",chartData:c.chartData}),bt:c.view_color,bv:o.p({"custom-prefix":"icon",type:"i-yibiaopan",size:"120"}),bw:o.t(c.air_level),bx:c.font_color,by:o.t(c.air_level_word),bz:c.font_color,bA:o.t(c.aqi_word),bB:c.font_color,bC:c.view_color,bD:o.p({"custom-prefix":"icon",type:"i-wendu",size:"60"}),bE:c.font_color,bF:o.t(c.wea_info[0]),bG:c.font_color,bH:o.p({"custom-prefix":"icon",type:"i-blob",size:"60"}),bI:c.font_color,bJ:o.t(c.wea_info[1]),bK:c.font_color,bL:o.p({"custom-prefix":"icon",type:"i-feng",size:"60"}),bM:c.font_color,bN:o.t(c.wea_info[2]),bO:c.font_color,bP:o.p({"custom-prefix":"icon",type:"i-fengxiang",size:"60"}),bQ:c.font_color,bR:o.t(c.wea_info[3]),bS:c.font_color,bT:c.view_color,bU:o.p({"custom-prefix":"icon",type:"i-duanxiu",size:"60"}),bV:o.t(c.life_list[0]),bW:c.font_color,bX:c.font_color,bY:o.p({"custom-prefix":"icon",type:"i-lanqiu",size:"60"}),bZ:o.t(c.life_list[1]),ca:c.font_color,cb:c.font_color,cc:o.p({"custom-prefix":"icon",type:"i-shouye",size:"60"}),cd:o.t(c.life_list[2]),ce:c.font_color,cf:c.font_color,cg:o.p({"custom-prefix":"icon",type:"i-yu",size:"60"}),ch:o.t(c.life_list[3]),ci:c.font_color,cj:c.font_color,ck:o.p({"custom-prefix":"icon",type:"i-qiche",size:"60"}),cl:o.t(c.life_list[4]),cm:c.font_color,cn:c.font_color,co:o.p({"custom-prefix":"icon",type:"i-fangshaishuang",size:"60"}),cp:o.t(c.life_list[5]),cq:c.font_color,cr:c.font_color,cs:o.p({"custom-prefix":"icon",type:"i-paoxie",size:"60"}),ct:o.t(c.life_list[6]),cv:c.font_color,cw:c.font_color,cx:c.view_color,cy:c.view_color,cz:c.bar_back_color}}]]);a.__runtimeHooks=1,wx.createPage(t);
